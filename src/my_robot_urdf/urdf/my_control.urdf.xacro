<?xml version="1.0"?>
<robot name="my_control" xmlns:xacro="http://wiki.ros.org/xacro">
  <!-- 3. ros2_control核心配置（4个控制单元：3关节+1夹爪） -->
  <ros2_control name="MyArmGripperHardware" type="system">
    <!-- 共享一个硬件插件（所有控制逻辑在同一个C++类中实现） -->
    <hardware>
      <plugin>my_robot_urdf/MyHardwareController</plugin>
    </hardware>

    <!-- 3.1 3个关节的控制接口（Position类型，核心运动控制） -->
    <joint name="joint1">
      <command_interface name="position" /> <!-- 关节位置控制指令 -->
      <state_interface name="position" />   <!-- 关节位置状态反馈 -->
      <state_interface name="velocity" />   <!-- 关节速度状态反馈（可选，用于速度限制） -->
    </joint>
    <joint name="joint2">
      <command_interface name="position" />
      <state_interface name="position" />
      <state_interface name="velocity" />
    </joint>
    <joint name="joint3">
      <command_interface name="position" />
      <state_interface name="position" />
      <state_interface name="velocity" />
    </joint>

    <!-- 3.2 夹爪控制接口（Position类型，支持开合角度调节，适配多数场景） -->
    <gpio name="gripper_joint">
      <command_interface name="position" /> <!-- 夹爪开合角度指令（0=开，0.6=合） -->
      <state_interface name="position" />   <!-- 夹爪当前角度反馈 -->
    </gpio>

    <!-- 可选：添加安全接口（GPIO急停/限位，复用之前的配置） -->
    <gpio name="gpio_estop">
      <state_interface name="digital" />
      <command_interface name="digital" />
    </gpio>
  </ros2_control>
</robot>